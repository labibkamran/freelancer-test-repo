<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- Messages Fragment -->
<div th:fragment="messages">
    <div th:if="${successMessage}" class="alert alert-success">
        <wa-icon name="check-circle" style="margin-right: 0.5rem;"></wa-icon>
        <span th:text="${successMessage}"></span>
    </div>
    
    <div th:if="${errorMessage}" class="alert alert-danger">
        <wa-icon name="exclamation-triangle" style="margin-right: 0.5rem;"></wa-icon>
        <span th:text="${errorMessage}"></span>
    </div>
</div>

<!-- Messages and Refresh Fragment -->
<div th:fragment="messages-and-refresh">
    <div th:if="${successMessage}" class="alert alert-success">
        <wa-icon name="check-circle" style="margin-right: 0.5rem;"></wa-icon>
        <span th:text="${successMessage}"></span>
    </div>
    
    <div th:if="${errorMessage}" class="alert alert-danger">
        <wa-icon name="exclamation-triangle" style="margin-right: 0.5rem;"></wa-icon>
        <span th:text="${errorMessage}"></span>
    </div>
    
    <script>
        // Clear form after successful submission
        if (document.querySelector('.alert-success')) {
            // Clear all input fields
            document.querySelectorAll('#batchPostingForm input, #batchPostingForm select').forEach(input => {
                if (input.type === 'date') {
                    input.value = new Date().toISOString().split('T')[0];
                } else if (input.type === 'text' || input.type === 'number') {
                    input.value = '';
                    // Clear VAT code data attributes
                    input.removeAttribute('data-vat-code');
                } else if (input.tagName === 'SELECT') {
                    // Reset to company currency (assume NOK for now)
                    input.value = 'NOK';
                }
                input.classList.remove('field-error');
                input.disabled = false; // Re-enable VAT fields
            });
            
            // Remove all posting lines and add fresh ones
            document.getElementById('postingLines').innerHTML = '';
            rowCounter = 0;
            addPostingLine();
            
            // Update balance display
            updateBalance();
        }
    </script>
</div>



</html> 