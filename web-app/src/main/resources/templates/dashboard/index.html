<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>Dashboard</title>
</head>

<body>
<main layout:fragment="content">
    <div class="container py-4">
        <!-- Welcome Header -->
        <div class="row mb-4">
            <div class="col">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 class="h3 mb-2">
                            ðŸ“Š Dashboard
                            <span th:if="${currentTenantId}" class="text-muted small">
                                (Company ID: <span th:text="${currentTenantId}">23</span>)
                            </span>
                        </h1>
                        <p class="text-muted mb-0">
                            Welcome back, <span class="fw-bold" th:text="${user.email}">User</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cash Flow Alert -->
        <div class="row" th:if="${showCashFlowAlert}">
            <div class="col">
                <wa-alert variant="warning" open>
                    <wa-icon slot="icon" name="exclamation-triangle"></wa-icon>
                    <strong>Cash Flow Alert</strong><br>
                    Your cash flow is projected to be low next month. Consider following up on pending invoices.
                    <!-- TODO: Link to cash flow management -->
                </wa-alert>
            </div>
        </div>
    </div>
</main>

<th:block layout:fragment="scripts">
    <script>
        // Get tenant ID from URL on page load
        document.addEventListener('DOMContentLoaded', function() {
            const tenantId = getCurrentTenantId();
            if (!tenantId) {
                // If no tenantId in URL, add default one
                const currentUrl = new URL(window.location.href);
                currentUrl.searchParams.set('tenantId', '23');
                window.history.replaceState({}, '', currentUrl.toString());
            }
            
            // TODO: Load actual dashboard data based on tenantId
            console.log('Loading dashboard for tenant:', tenantId || '23');
        });
        
        // TODO: Implement chart initialization when actual data is available
        function initializeCharts() {
            // Chart.js integration will go here
        }
    </script>
</th:block>
</body>
</html> 