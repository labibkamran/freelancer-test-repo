<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">

<body>
<main layout:fragment="content">
    <div class="wa-container">
        <div class="wa-stack wa-gap-l">

            <div class="wa-stack wa-gap-s">
                <h1 class="wa-heading-xl" th:text="#{tenant.select.title}"/>
                <p class="wa-caption-l" th:text="#{tenant.select.caption}" style="color: var(--wa-color-neutral-600);"/>
            </div>

            <div class="wa-grid" style="--min-column-size: 29ch;">
                <wa-card th:each="tenant : ${tenants}" with-footer>
                    <div class="wa-stack wa-align-items-center wa-gap-xs">
                        <h2 class="wa-heading-m" th:text="${tenant.companyName}"/>
                        <p class="wa-caption-l"
                           th:if="${currentTenant != null and currentTenant.id == tenant.id}"
                           th:text="#{tenant.current.badge}"/>
                    </div>
                    <div slot="footer"
                         class="wa-grid wa-gap-xs"
                         style="--min-column-size: 10ch;">
                        <wa-button
                                th:text="#{tenant.select.button}"
                                th:if="${currentTenant == null or currentTenant.id != tenant.id}"
                                appearance="outlined"
                                variant="brand"
                                th:hx-post="@{/htmx/auth/select-tenant(tenantId=${tenant.id})}"
                                th:hx-target="'body'"
                                th:hx-swap="'innerHTML'"
                                th:hx-include="'[name=\'tenantId\']'"
                                th:hx-indicator="'#loading-indicator'">
                            Select
                        </wa-button>
                        <wa-button
                                th:text="#{tenant.select.checked}"
                                th:if="${currentTenant != null and currentTenant.id == tenant.id}"
                                appearance="outlined"
                                disabled>
                            Selected
                        </wa-button>
                    </div>
                </wa-card>
            </div>
        </div>
    </div>
</main>
</body>
</html> 